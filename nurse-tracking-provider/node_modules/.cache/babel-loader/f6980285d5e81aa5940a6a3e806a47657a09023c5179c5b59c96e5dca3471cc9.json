{"ast":null,"code":"import _objectSpread from\"C:/Users/MARIO/OneDrive/Desktop/NeoPass-maihn/nurse-tracking-provider/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import io from\"socket.io-client\";import\"./Requests.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(\"https://b8fb2cfc-6b2e-4cfe-b8bc-80d780b52dd1-00-3ffyp5ubnqsg5.picard.replit.dev/api/request\");// غير العنوان إذا كنت على دومين\nexport default function Requests(){const[requests,setRequests]=useState([]);useEffect(()=>{// تعريف الممرض أونلاين عند فتح الصفحة\nsocket.emit(\"providerOnline\",{name:\"اسم الممرض\"});// استقبال إشعار طلب جديد\nsocket.on(\"requestNotification\",requestData=>{setRequests(prev=>[requestData,...prev]);alert(\"طلب جديد من مريض: \"+requestData.patientName);});// تنظيف عند الخروج\nreturn()=>socket.disconnect();},[]);function handleAccept(idx){setRequests(reqs=>reqs.map((req,i)=>i===idx?_objectSpread(_objectSpread({},req),{},{status:\"مقبول\"}):req));}function handleReject(idx){setRequests(reqs=>reqs.map((req,i)=>i===idx?_objectSpread(_objectSpread({},req),{},{status:\"مرفوض\"}):req));}return/*#__PURE__*/_jsxs(\"div\",{className:\"requests-main\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),requests.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u0637\\u0644\\u0628\\u0627\\u062A \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B.\"}),requests.map((req,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"request-card\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0631\\u064A\\u0636:\"}),\" \",req.patientName]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:\"}),\" \",req.location]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641:\"}),\" \",req.phone]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0627\\u0644\\u062E\\u062F\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629:\"}),\" \",req.services&&req.services.join(\", \")]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"status-\"+(req.status||\"جديد\"),children:req.status||\"جديد\"})]}),(!req.status||req.status===\"جديد\")&&/*#__PURE__*/_jsxs(\"div\",{className:\"req-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAccept(idx),className:\"accept-btn\",children:\"\\u0642\\u0628\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReject(idx),className:\"reject-btn\",children:\"\\u0631\\u0641\\u0636\"})]})]},idx))]});}","map":{"version":3,"names":["React","useEffect","useState","io","jsx","_jsx","jsxs","_jsxs","socket","Requests","requests","setRequests","emit","name","on","requestData","prev","alert","patientName","disconnect","handleAccept","idx","reqs","map","req","i","_objectSpread","status","handleReject","className","children","length","location","phone","services","join","onClick"],"sources":["C:/Users/MARIO/OneDrive/Desktop/NeoPass-maihn/nurse-tracking-provider/src/components/Requests.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport \"./Requests.css\";\n\nconst socket = io(\"https://b8fb2cfc-6b2e-4cfe-b8bc-80d780b52dd1-00-3ffyp5ubnqsg5.picard.replit.dev/api/request\"); // غير العنوان إذا كنت على دومين\n\nexport default function Requests() {\n  const [requests, setRequests] = useState([]);\n\n  useEffect(() => {\n    // تعريف الممرض أونلاين عند فتح الصفحة\n    socket.emit(\"providerOnline\", { name: \"اسم الممرض\" });\n\n    // استقبال إشعار طلب جديد\n    socket.on(\"requestNotification\", (requestData) => {\n      setRequests((prev) => [requestData, ...prev]);\n      alert(\"طلب جديد من مريض: \" + requestData.patientName);\n    });\n\n    // تنظيف عند الخروج\n    return () => socket.disconnect();\n  }, []);\n\n  function handleAccept(idx) {\n    setRequests((reqs) =>\n      reqs.map((req, i) =>\n        i === idx ? { ...req, status: \"مقبول\" } : req\n      )\n    );\n  }\n  function handleReject(idx) {\n    setRequests((reqs) =>\n      reqs.map((req, i) =>\n        i === idx ? { ...req, status: \"مرفوض\" } : req\n      )\n    );\n  }\n\n  return (\n    <div className=\"requests-main\">\n      <h2>الطلبات الجديدة</h2>\n      {requests.length === 0 && (\n        <div className=\"empty\">لا يوجد طلبات حالياً.</div>\n      )}\n      {requests.map((req, idx) => (\n        <div className=\"request-card\" key={idx}>\n          <div>\n            <b>اسم المريض:</b> {req.patientName}\n          </div>\n          <div>\n            <b>العنوان:</b> {req.location}\n          </div>\n          <div>\n            <b>رقم الهاتف:</b> {req.phone}\n          </div>\n          <div>\n            <b>الخدمات المطلوبة:</b> {req.services && req.services.join(\", \")}\n          </div>\n          <div>\n            <b>الحالة:</b>{\" \"}\n            <span className={\"status-\" + (req.status || \"جديد\")}>\n              {req.status || \"جديد\"}\n            </span>\n          </div>\n          {(!req.status || req.status === \"جديد\") && (\n            <div className=\"req-actions\">\n              <button\n                onClick={() => handleAccept(idx)}\n                className=\"accept-btn\"\n              >\n                قبول\n              </button>\n              <button\n                onClick={() => handleReject(idx)}\n                className=\"reject-btn\"\n              >\n                رفض\n              </button>\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}